{"ast":null,"code":"import { createSlice, nanoid } from '@reduxjs/toolkit';\nconst initialState = {\n  rooms: [{\n    id: \"1\",\n    name: \"IT\",\n    messages: [{\n      id: nanoid(),\n      text: \"Welcome to IT Room\",\n      username: {\n        name: 'admin',\n        color: ''\n      }\n    }]\n  }, {\n    id: \"2\",\n    name: \"Politics\",\n    messages: [{\n      id: nanoid(),\n      text: \"Welcome to Politics Room\",\n      username: {\n        name: 'admin',\n        color: ''\n      }\n    }]\n  }, {\n    id: \"3\",\n    name: \"Football\",\n    messages: [{\n      id: nanoid(),\n      text: \"Welcome to Football Room\",\n      username: {\n        name: 'admin',\n        color: ''\n      }\n    }]\n  }],\n  status: 'idle',\n  error: null\n};\nconst roomsSlice = createSlice({\n  name: 'rooms',\n  initialState,\n  reducers: {\n    newRoomCreated(state, action) {\n      const {\n        roomId,\n        roomName\n      } = action.payload;\n      state.rooms.push({\n        id: roomId,\n        name: roomName,\n        messages: []\n      });\n    },\n\n    newChatMessage(state, action) {\n      const {\n        roomId,\n        text,\n        messageId,\n        username,\n        usernameColor\n      } = action.payload;\n      const currentRoom = state.rooms.find(room => room.id === roomId);\n\n      if (currentRoom) {\n        currentRoom.messages.push({\n          id: messageId,\n          text: text,\n          username: {\n            name: username,\n            color: usernameColor\n          }\n        });\n      }\n    },\n\n    userJoinedRoom(state, action) {\n      const {\n        roomId,\n        username,\n        messageId\n      } = action.payload;\n      const currentRoom = state.rooms.find(room => room.id === roomId);\n\n      if (currentRoom) {\n        currentRoom.messages.push({\n          id: messageId,\n          text: `${username} has joined the room`\n        });\n      }\n    }\n\n  }\n});\nexport const {\n  newChatMessage,\n  newRoomCreated,\n  userJoinedRoom\n} = roomsSlice.actions;\nexport default roomsSlice.reducer;","map":{"version":3,"sources":["/home/chiks/socketProject/chat-room/src/features/rooms/roomsSlice.js"],"names":["createSlice","nanoid","initialState","rooms","id","name","messages","text","username","color","status","error","roomsSlice","reducers","newRoomCreated","state","action","roomId","roomName","payload","push","newChatMessage","messageId","usernameColor","currentRoom","find","room","userJoinedRoom","actions","reducer"],"mappings":"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","sourcesContent":["import { createSlice, nanoid } from '@reduxjs/toolkit'\n\n\nconst initialState = {\n    rooms: [\n        { \n            id: \"1\",\n            name: \"IT\", \n            messages: [\n                { \n                    id: nanoid(), \n                    text: \"Welcome to IT Room\", \n                    username: { \n                        name: 'admin', \n                        color: '' \n                    },\n                },\n            ]\n        },\n\n\n        { id: \"2\", name: \"Politics\", messages: [{ id: nanoid(), text: \"Welcome to Politics Room\", username: { name: 'admin', color: '' }}]},\n        { id: \"3\", name: \"Football\", messages: [{ id: nanoid(), text: \"Welcome to Football Room\", username: { name: 'admin', color: '' }}]}\n    ],\n    status: 'idle',\n    error: null\n}\n\nconst roomsSlice = createSlice({\n    name: 'rooms',\n    initialState,\n    reducers: {\n        newRoomCreated(state, action) {\n            const { roomId, roomName } = action.payload\n            state.rooms.push({\n                id: roomId,\n                name: roomName,\n                messages: []\n            })\n        },\n\n        newChatMessage(state, action) {\n            const { roomId, text, messageId, username, usernameColor } = action.payload\n            const currentRoom = state.rooms.find(room => room.id === roomId)\n            if (currentRoom) {\n                currentRoom.messages.push({\n                    id: messageId,\n                    text: text,\n                    username: {\n                        name: username,\n                        color: usernameColor,\n                    }                    \n                })\n            }\n        },\n\n        userJoinedRoom(state, action) {\n            const { roomId, username, messageId } = action.payload\n            const currentRoom = state.rooms.find(room => room.id === roomId)\n            if (currentRoom) {\n                currentRoom.messages.push({\n                    id: messageId,\n                    text: `${username} has joined the room`,                    \n                })\n            }\n        }\n    }\n})\n\nexport const { newChatMessage, newRoomCreated, userJoinedRoom } = roomsSlice.actions\n\nexport default roomsSlice.reducer"]},"metadata":{},"sourceType":"module"}